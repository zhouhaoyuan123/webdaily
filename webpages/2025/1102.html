<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebDaily 20251102 Issue</title>
</head>
<body>
    <!-- This pages contains a canvas that fills the entire page
    when the cursor moves onto the words / pixels on the canvas,
    the pixels will be sucked into the cursor and disappear, as
    if the cursor is a black hole. --> 
    <canvas id="blackHoleCanvas" style="position:fixed; top:0; left:0; width:100%; height:100%;"></canvas>
    <script>
        const canvas = document.getElementById('blackHoleCanvas');
        const ctx = canvas.getContext('2d');
        drawText();
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            drawText();
        }

        function drawText() {
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = 'black';
            // ensure the text does not go out of the screen
            // by ensuring the font size is small enough
            const text = 'WebDaily 20251102 Issue - Move your cursor to suck pixels!';
            // find best font size by using ctx.measureText() and trial and error in log(n) time
            let fontSize = 100;
            while (true) {
                ctx.font = `${fontSize}px Arial`;
                const textMetrics = ctx.measureText(text);
                if (textMetrics.width < canvas.width * 0.9) {
                    break;
                }
                fontSize -= 2;
            }
            ctx.font = `${fontSize}px Arial`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(text, canvas.width / 2, canvas.height / 2);
        }

        function suckPixels(x, y) {
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;

            for (let i = 0; i < data.length; i += 4) {
                const pixelX = (i / 4) % canvas.width;
                const pixelY = Math.floor((i / 4) / canvas.width);
                const dx = pixelX - x;
                const dy = pixelY - y;
                const distance = Math.sqrt(dx * dx + dy * dy);

                if (distance < 100) {
                    const angle = Math.atan2(dy, dx);
                    const pullStrength = (100 - distance) / 100 * 5;
                    const newX = Math.floor(pixelX + Math.cos(angle) * pullStrength);
                    const newY = Math.floor(pixelY + Math.sin(angle) * pullStrength);

                    if (newX >= 0 && newX < canvas.width && newY >= 0 && newY < canvas.height) {
                        const newIndex = (newY * canvas.width + newX) * 4;
                        data[newIndex] = data[i];
                        data[newIndex + 1] = data[i + 1];
                        data[newIndex + 2] = data[i + 2];
                        data[newIndex + 3] = data[i + 3];

                        data[i] = 255; // Set original pixel to white
                        data[i + 1] = 255;
                        data[i + 2] = 255;
                        data[i + 3] = 255;
                    }
                }
            }

            ctx.putImageData(imageData, 0, 0);
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();
        canvas.addEventListener('mousemove', (event) => {
            suckPixels(event.clientX, event.clientY);
        });
    </script>
</html>